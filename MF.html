<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUNEST - IELTS Reading Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            height: 100vh;
            overflow: hidden;
        }

        .welcome-screen {
            max-width: 700px;
            margin: 20px auto;
            background: white;
            border: 3px solid #dc2626;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(220, 38, 38, 0.1);
            overflow: hidden;
        }

        .welcome-header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
            border-bottom: 2px solid #991b1b;
        }

        .welcome-brand {
            font-size: 32px;
            font-weight: bold;
            letter-spacing: 3px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .welcome-title {
            font-size: 18px;
            font-weight: normal;
            opacity: 0.95;
            letter-spacing: 1px;
        }

        .welcome-content {
            padding: 20px;
        }

        .student-name-section {
            margin-bottom: 20px;
            padding: 20px;
            background: #fef2f2;
            border: 2px solid #dc2626;
            border-radius: 8px;
        }

        .student-name-label {
            display: block;
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .student-name-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .student-name-input:focus {
            outline: none;
            border-color: #991b1b;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .error-message {
            color: #dc2626;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .instructions-section {
            margin-bottom: 20px;
        }

        .instructions-title {
            font-size: 18px;
            color: #991b1b;
            margin-bottom: 15px;
            font-weight: bold;
            border-bottom: 2px solid #dc2626;
            padding-bottom: 10px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
        }

        .instructions-list li {
            padding: 10px 0 10px 25px;
            position: relative;
            color: #374151;
            line-height: 1.5;
            font-size: 14px;
        }

        .instructions-list li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #dc2626;
            font-weight: bold;
            font-size: 16px;
        }

        .start-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .exam-container {
            display: none;
            height: 100vh;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 10px 15px;
            border-bottom: 2px solid #991b1b;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .brand {
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .exam-title {
            font-size: 12px;
            opacity: 0.95;
        }

        .timer-display {
            font-size: 20px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .navigation-bar {
            background: #fef2f2;
            padding: 10px 15px;
            border-bottom: 2px solid #dc2626;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 8px 15px;
            background: white;
            color: #dc2626;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #fef2f2;
        }

        .nav-btn.active {
            background: #dc2626;
            color: white;
        }

        .student-info {
            color: #991b1b;
            font-weight: bold;
            font-size: 12px;
            width: 100%;
            text-align: center;
        }

        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
            flex-direction: column;
        }

        .passage-panel {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #ffffff;
            border-bottom: 2px solid #dc2626;
        }

        .passage-content {
            max-width: 100%;
            line-height: 1.6;
            font-size: 14px;
        }

        .passage-title {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #000;
        }

        .passage-text {
            margin-bottom: 15px;
            text-align: justify;
        }

        .passage-image {
            text-align: center;
            margin: 15px 0;
        }

        .passage-image img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
        }

        .questions-panel {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #f9fafb;
        }

        .questions-container {
            max-width: 100%;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000;
        }

        .instructions {
            margin-bottom: 20px;
            font-style: italic;
            line-height: 1.5;
            padding: 12px;
            background: #fef2f2;
            border-left: 4px solid #dc2626;
            font-size: 13px;
        }

        .question-section {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #dc2626;
            border-radius: 4px;
        }

        .question-item {
            margin-bottom: 15px;
            padding: 12px;
            background: #fefefe;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
        }

        .question-number {
            font-weight: bold;
            margin-bottom: 8px;
            color: #dc2626;
            font-size: 14px;
        }

        .question-text {
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 14px;
        }

        .tf-options {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .tf-option {
            padding: 8px 12px;
            background: white;
            border: 2px solid #dc2626;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            font-size: 12px;
            flex: 1;
            min-width: 80px;
            text-align: center;
        }

        .tf-option:hover {
            background: #fef2f2;
        }

        .tf-option.selected {
            background: #dc2626;
            color: white;
        }

        .summary-box {
            background: #f9fafb;
            padding: 15px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 14px;
        }

        .summary-box strong {
            font-weight: bold;
        }

        .summary-box ul {
            margin-left: 15px;
            margin-top: 8px;
        }

        .summary-box li {
            margin-bottom: 8px;
        }

        .answer-input {
            width: 120px;
            padding: 5px 8px;
            border: none;
            border-bottom: 2px solid #dc2626;
            font-size: 14px;
            font-family: 'Georgia', serif;
            background: transparent;
        }

        .answer-input:focus {
            outline: none;
            border-bottom-color: #991b1b;
        }

        .footer {
            background: #fef2f2;
            padding: 15px;
            border-top: 2px solid #dc2626;
            text-align: center;
        }

        .submit-button {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .highlight {
            background-color: yellow;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 3px solid #dc2626;
        }

        .modal-header {
            font-size: 20px;
            color: #dc2626;
            margin-bottom: 15px;
            font-weight: bold;
            text-align: center;
        }

        .answer-sheet {
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            background: #f9fafb;
            padding: 15px;
            border-radius: 4px;
            border: 2px solid #dc2626;
            margin: 15px 0;
            font-size: 11px;
            word-wrap: break-word;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .modal-button {
            padding: 10px 20px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
        }

        .modal-button:hover {
            background: #b91c1c;
        }

        .proctoring-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 3px solid #dc2626;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: none;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }

        .proctoring-alert.active {
            display: block;
        }

        .proctoring-alert h2 {
            color: #dc2626;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .proctoring-alert p {
            margin-bottom: 15px;
            color: #374151;
            font-size: 14px;
        }

        .proctoring-alert input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .proctoring-alert button {
            padding: 10px 25px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
        }

        .violation-log {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(220, 38, 38, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1500;
            display: none;
        }

        .violation-log.active {
            display: block;
        }

        .blackout-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1999;
            display: none;
        }

        .blackout-overlay.active {
            display: block;
        }

        .info-note {
            font-size: 11px;
            font-style: italic;
            color: #666;
            margin-top: 8px;
            border-top: 1px solid #ddd;
            padding-top: 8px;
        }

        /* Desktop view adjustments */
        @media (min-width: 768px) {
            .welcome-screen {
                margin: 50px auto;
            }

            .welcome-header {
                padding: 40px;
            }

            .welcome-brand {
                font-size: 42px;
            }

            .welcome-title {
                font-size: 24px;
            }

            .welcome-content {
                padding: 40px;
            }

            .student-name-section {
                margin-bottom: 30px;
                padding: 25px;
            }

            .student-name-label {
                font-size: 16px;
            }

            .student-name-input {
                font-size: 18px;
            }

            .instructions-title {
                font-size: 20px;
            }

            .instructions-list li {
                padding: 12px 0 12px 30px;
                font-size: 16px;
            }

            .instructions-list li:before {
                font-size: 18px;
            }

            .start-button {
                padding: 18px;
                font-size: 20px;
            }

            .header {
                padding: 15px 30px;
            }

            .brand {
                font-size: 24px;
            }

            .exam-title {
                font-size: 16px;
            }

            .timer-display {
                font-size: 28px;
                letter-spacing: 2px;
            }

            .navigation-bar {
                padding: 15px 30px;
            }

            .nav-btn {
                padding: 10px 25px;
                font-size: 16px;
            }

            .student-info {
                font-size: 14px;
                width: auto;
                text-align: right;
            }

            .main-content {
                flex-direction: row;
            }

            .passage-panel {
                border-bottom: none;
                border-right: 2px solid #dc2626;
                padding: 30px;
            }

            .passage-content {
                max-width: 800px;
                font-size: 16px;
                line-height: 1.8;
            }

            .passage-title {
                font-size: 28px;
                margin-bottom: 30px;
            }

            .passage-text {
                margin-bottom: 20px;
            }

            .questions-panel {
                padding: 30px;
            }

            .questions-container {
                max-width: 600px;
            }

            .section-title {
                font-size: 24px;
                margin-bottom: 20px;
            }

            .instructions {
                margin-bottom: 25px;
                padding: 15px;
                font-size: 14px;
                line-height: 1.6;
            }

            .question-section {
                padding: 20px;
                margin-bottom: 25px;
            }

            .question-item {
                margin-bottom: 20px;
                padding: 15px;
            }

            .question-number {
                font-size: 16px;
            }

            .question-text {
                font-size: 16px;
                line-height: 1.6;
            }

            .tf-options {
                gap: 10px;
            }

            .tf-option {
                padding: 10px 20px;
                font-size: 14px;
                flex: 0 1 auto;
                min-width: 100px;
            }

            .summary-box {
                padding: 20px;
                margin-bottom: 20px;
                line-height: 1.8;
                font-size: 16px;
            }

            .summary-box ul {
                margin-left: 20px;
                margin-top: 10px;
            }

            .summary-box li {
                margin-bottom: 10px;
            }

            .answer-input {
                width: 150px;
                padding: 6px 10px;
                font-size: 16px;
            }

            .footer {
                padding: 20px 30px;
            }

            .submit-button {
                padding: 15px 50px;
                font-size: 18px;
            }

            .modal-content {
                padding: 40px;
            }

            .modal-header {
                font-size: 28px;
                margin-bottom: 20px;
            }

            .answer-sheet {
                padding: 20px;
                font-size: 14px;
            }

            .modal-buttons {
                margin-top: 20px;
            }

            .modal-button {
                padding: 12px 30px;
                font-size: 16px;
            }

            .proctoring-alert {
                padding: 30px 40px;
            }

            .proctoring-alert h2 {
                font-size: 22px;
            }

            .proctoring-alert p {
                font-size: 16px;
            }

            .proctoring-alert input {
                padding: 12px;
            }

            .proctoring-alert button {
                padding: 12px 30px;
                font-size: 16px;
                width: auto;
            }

            .violation-log {
                padding: 10px 15px;
                font-size: 14px;
            }

            .info-note {
                font-size: 12px;
                margin-top: 10px;
                padding-top: 10px;
            }
        }

        /* Tablet landscape adjustments */
        @media (min-width: 768px) and (max-width: 1024px) {
            .passage-content {
                font-size: 15px;
            }

            .questions-container {
                font-size: 15px;
            }
        }

        /* Small mobile devices */
        @media (max-width: 375px) {
            .welcome-brand {
                font-size: 28px;
            }

            .welcome-title {
                font-size: 16px;
            }

            .brand {
                font-size: 18px;
            }

            .timer-display {
                font-size: 18px;
            }

            .nav-btn {
                padding: 6px 10px;
                font-size: 12px;
            }

            .passage-title {
                font-size: 18px;
            }

            .section-title {
                font-size: 18px;
            }

            .tf-option {
                font-size: 11px;
                padding: 6px 8px;
                min-width: 70px;
            }

            .answer-input {
                width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-header">
            <div class="welcome-brand">EDUNEST</div>
            <div class="welcome-title">IELTS Mock Exam - Reading Test</div>
        </div>
        <div class="welcome-content">
            <div class="student-name-section">
                <label class="student-name-label">Enter Your Full Name:</label>
                <input type="text" id="studentName" class="student-name-input" placeholder="John Doe">
                <div class="error-message" id="nameError">Please enter your name.</div>
            </div>
            <div class="instructions-section">
                <div class="instructions-title">Test Instructions</div>
                <ul class="instructions-list">
                    <li>This reading test contains 1 passage with 13 questions</li>
                    <li>You have 60 minutes to complete the test</li>
                    <li>You can highlight text in the passage by selecting it</li>
                    <li>Click highlighted text again to remove highlighting</li>
                    <li>The test must be taken in fullscreen mode</li>
                    <li>Do not switch tabs, minimize the window, or exit fullscreen</li>
                    <li>If you violate proctoring rules, you must re-enter the code</li>
                    <li>Your answers will be automatically saved and submitted</li>
                </ul>
            </div>
            <button class="start-button" onclick="startExam()">Start Exam</button>
        </div>
    </div>

    <div class="exam-container" id="examContainer">
        <div class="header">
            <div class="header-left">
                <div class="brand">EDUNEST</div>
                <div class="exam-title">IELTS Reading Test - Test 2</div>
            </div>
            <div class="timer-display" id="timer">60:00</div>
        </div>

        <div class="navigation-bar">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showView('passage')">Passage</button>
                <button class="nav-btn" onclick="showView('questions')">Questions</button>
                <button class="nav-btn" onclick="showView('both')">Both</button>
            </div>
            <div class="student-info" id="studentInfo">Student: </div>
        </div>

        <div class="main-content">
            <div class="passage-panel" id="passagePanel">
                <div class="passage-content" id="passageContent">
                    <div class="section-title" style="text-align: center; background: #333; color: white; padding: 15px; margin-bottom: 30px;">READING</div>
                    
                    <div style="text-align: center; margin-bottom: 10px; font-weight: bold;">READING PASSAGE 1</div>
                    <div style="text-align: center; margin-bottom: 30px; font-style: italic;">You should spend about 20 minutes on Questions 1–13, which are based on Reading Passage 1 below.</div>
                    
                    <div class="passage-title">The White Horse of Uffington</div>
                    
                    <div class="passage-text">The cutting of huge figures or 'geoglyphs' into the earth of English hillsides has taken place for more than 3,000 years. There are 56 hill figures scattered around England, with the vast majority on the chalk downlands of the country's southern counties. The figures include giants, horses, crosses and regimental badges. Although the majority of these geoglyphs date within the last 300 years or so, there are one or two that are much older.</div>
                    
                    <div class="passage-text">The most famous of these figures is perhaps also the most mysterious – the Uffington White Horse in Oxfordshire. The White Horse has recently been re-dated and shown to be even older than its previously assigned ancient pre-Roman Iron Age* date. More controversial is the date of the enigmatic Long Man of Wilmington in Sussex. While many historians are convinced the figure is prehistoric, others believe that it was the work of an artistic monk from a nearby priory and was created between the 11th and 15th centuries.</div>
                    
                    <div class="passage-text">The method of cutting these huge figures was simply to remove the overlying grass to reveal the gleaming white chalk below. However, the grass would soon grow over the geoglyph again unless it was regularly cleaned or scoured by a fairly large team of people. One reason that the vast majority of hill figures have disappeared is that when the traditions associated with the figures faded, people no longer bothered or remembered to clear away the grass to expose the chalk outline. Furthermore, over hundreds of years the outlines would sometimes change due to people not always cutting in exactly the same place, thus creating a different shape to the original geoglyph. The fact that any ancient hill figures survive at all in England today is testament to the strength and continuity of local customs and beliefs which, in one case at least, must stretch back over millennia.</div>
                    
                    <div class="info-note">*Iron Age: a period (in Britain 800 BCE – 43 CE) that is characterised by the use of iron tools</div>
                    
                    <div class="passage-text">The Uffington White Horse is a unique, stylised representation of a horse consisting of a long, sleek back, thin disjointed legs, a streaming tail, and a bird-like beaked head. The elegant creature almost melts into the landscape. The White Horse is situated 2.5 km from Uffington village on a steep slope close to the Late Bronze Age* (c. 7th century BCE) hillfort of Uffington Castle and below the Ridgeway, a long-distance Neolithic** track.</div>
                    
                    <div class="passage-text">The Uffington Horse is also surrounded by Bronze Age burial mounds. It is not far from the Bronze Age cemetery of Lambourn Seven Barrows, which consists of more than 30 well-preserved burial mounds. The carving has been placed in such a way as to make it extremely difficult to see from close quarters, and like many geoglyphs is best appreciated from the air. Nevertheless, there are certain areas of the Vale of the White Horse, the valley containing and named after the enigmatic creature, from which an adequate impression may be gained. Indeed on a clear day the carving can be seen from up to 30 km away.</div>
                    
                    <div class="passage-text">The earliest evidence of a horse at Uffington is from the 1070s CE when 'White Horse Hill' is mentioned in documents from the nearby Abbey of Abingdon, and the first reference to the horse itself is soon after, in 1190 CE. However, the carving is believed to date back much further than that. Due to the similarity of the Uffington White Horse to the stylised depictions of horses on 1st century BCE coins, it had been thought that the creature must also date to that period.</div>
                    
                    <div class="passage-text">However, in 1995 Optically Stimulated Luminescence (OSL) testing was carried out by the Oxford Archaeological Unit on soil from two of the lower layers of the horse's body, and from another cut near the base. The result was a date for the horse's construction somewhere between 1400 and 600 BCE – in other words, it had a Late Bronze Age or Early Iron Age origin.</div>
                    
                    <div class="passage-text">The latter end of this date range would tie the carving of the horse in with occupation of the nearby Uffington hillfort, indicating that it may represent a tribal emblem marking the land of the inhabitants of the hillfort. Alternatively, the carving may have been carried out during a Bronze or Iron Age ritual. Some researchers see the horse as representing the Celtic*** horse goddess Epona, who was worshipped as a protector of horses, and for her associations with fertility. However, the cult of Epona was not imported from Gaul (France) until around the first century CE. This date is at least six centuries after the Uffington Horse was probably carved. Nevertheless, the horse had great ritual and economic significance during the Bronze and Iron Ages, as attested by its depictions on jewellery and other metal objects. It is possible that the carving represents a goddess in native mythology, such as Rhiannon, described in later Welsh mythology as a beautiful woman dressed in gold and riding a white horse.</div>
                    
                    <div class="passage-text">The fact that geoglyphs can disappear easily, along with their associated rituals and meaning, indicates that they were never intended to be anything more than temporary gestures. But this does not lessen their importance. These giant carvings are a fascinating glimpse into the minds of their creators and how they viewed the landscape in which they lived.</div>
                    
                    <div class="info-note">*Bronze Age: a period (in Britain c. 2,500 BCE – 800 BCE) that is characterised by the development of bronze tools</div>
                    <div class="info-note">**Neolithic: a period (in Britain c. 4,000 BCE – c. 2,500 BCE) that is significant for the spread of agricultural practices, and the use of stone tools</div>
                    <div class="info-note">***Celtic: an ancient people who migrated from Europe to Britain before the Romans</div>
                </div>
            </div>

            <div class="questions-panel" id="questionsPanel">
                <div class="questions-container">
                    <div class="section-title">Questions 1–13</div>
                    
                    <!-- Questions 1-8: TRUE/FALSE/NOT GIVEN -->
                    <div class="question-section">
                        <div class="instructions">
                            <strong>Questions 1–8</strong><br><br>
                            Do the following statements agree with the information given in Reading Passage 1?<br><br>
                            In boxes 1–8 on your answer sheet, write<br><br>
                            <strong>TRUE</strong> if the statement agrees with the information<br>
                            <strong>FALSE</strong> if the statement contradicts the information<br>
                            <strong>NOT GIVEN</strong> if there is no information on this
                        </div>

                        <div class="question-item">
                            <div class="question-number">1</div>
                            <div class="question-text">Most geoglyphs in England are located in a particular area of the country.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(1, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(1, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(1, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">2</div>
                            <div class="question-text">There are more geoglyphs in the shape of a horse than any other creature.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(2, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(2, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(2, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">3</div>
                            <div class="question-text">A recent dating of the Uffington White Horse indicates that people were mistaken about its age.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(3, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(3, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(3, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">4</div>
                            <div class="question-text">Historians have come to an agreement about the origins of the Long Man of Wilmington.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(4, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(4, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(4, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">5</div>
                            <div class="question-text">Geoglyphs were created by people placing white chalk on the hillside.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(5, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(5, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(5, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">6</div>
                            <div class="question-text">Many geoglyphs in England are no longer visible.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(6, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(6, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(6, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">7</div>
                            <div class="question-text">The shape of some geoglyphs has been altered over time.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(7, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(7, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(7, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>

                        <div class="question-item">
                            <div class="question-number">8</div>
                            <div class="question-text">The fame of the Uffington White Horse is due to its size.</div>
                            <div class="tf-options">
                                <div class="tf-option" onclick="selectTF(8, 'TRUE')">TRUE</div>
                                <div class="tf-option" onclick="selectTF(8, 'FALSE')">FALSE</div>
                                <div class="tf-option" onclick="selectTF(8, 'NOT GIVEN')">NOT GIVEN</div>
                            </div>
                        </div>
                    </div>

                    <!-- Questions 9-13: Summary Completion -->
                    <div class="question-section">
                        <div class="instructions">
                            <strong>Questions 9–13</strong><br><br>
                            Complete the notes below.<br><br>
                            Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.<br><br>
                            Write your answers in boxes 9–13 on your answer sheet.
                        </div>

                        <div class="summary-box">
                            <strong>The Uffington White Horse</strong><br><br>
                            
                            <strong>The location of the Uffington White Horse:</strong>
                            <ul>
                                <li>a distance of 2.5 km from Uffington village</li>
                                <li>near an ancient road known as the <strong>9</strong> <input type="text" class="answer-input" data-question="9" placeholder="......."></li>
                                <li>close to an ancient cemetery that has a number of burial mounds</li>
                            </ul>
                            
                            <strong>Dating the Uffington White Horse:</strong>
                            <ul>
                                <li>first reference to White Horse Hill appears in <strong>10</strong> <input type="text" class="answer-input" data-question="10" placeholder="......."> from the 1070s</li>
                                <li>horses shown on coins from the period 100 BCE – 1 BCE are similar in appearance</li>
                                <li>according to analysis of the surrounding <strong>11</strong> <input type="text" class="answer-input" data-question="11" placeholder="......."> , the Horse is Late Bronze Age / Early Iron Age</li>
                            </ul>
                            
                            <strong>Possible reasons for creation of the Uffington White Horse:</strong>
                            <ul>
                                <li>an emblem to indicate land ownership</li>
                                <li>formed part of an ancient ritual</li>
                                <li>was a representation of goddess Epona – associated with protection of horses and <strong>12</strong> <input type="text" class="answer-input" data-question="12" placeholder="......."></li>
                                <li>was a representation of a Welsh goddess called <strong>13</strong> <input type="text" class="answer-input" data-question="13" placeholder="......."></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <button class="submit-button" onclick="submitExam()">Submit Exam</button>
        </div>
    </div>

    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <div class="modal-header">Exam Submitted Successfully!</div>
            <div class="answer-sheet" id="answerSheet"></div>
            <div class="modal-buttons">
                <button class="modal-button" onclick="copyAnswers()">Copy Answers</button>
                <button class="modal-button" onclick="closeResults()">Close</button>
            </div>
        </div>
    </div>

    <div class="proctoring-alert" id="proctoringAlert">
        <h2>⚠️ Proctoring Violation Detected</h2>
        <p id="violationMessage">You have switched tabs or lost focus. Enter the reactivation code to continue.</p>
        <input type="text" id="reactivationInput" placeholder="Enter Reactivation Code">
        <div class="error-message" id="reactivationError" style="display: none;">Invalid code. Try again.</div>
        <div style="margin: 10px 0; font-weight: bold;">Time remaining: <span id="reactivationTimer">60</span> seconds</div>
        <button onclick="verifyReactivation()">Continue Exam</button>
    </div>

    <div class="violation-log" id="violationLog">
        Violations: <span id="violationCount">0</span>
    </div>

    <div class="blackout-overlay" id="blackoutOverlay"></div>

    <script>
        let timerInterval;
        let reactivationTimerInterval;
        let studentName = '';
        let violationCount = 0;
        let examStarted = false;
        let reactivationTimeLeft = 60;
        let tfAnswers = {};
        const CORRECT_CODE = '1602';

        function startExam() {
            const nameInput = document.getElementById('studentName');
            const name = nameInput.value.trim();
            const nameError = document.getElementById('nameError');
            
            if (!name) {
                nameError.style.display = 'block';
                return;
            }
            
            nameError.style.display = 'none';
            studentName = name;
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('examContainer').style.display = 'flex';
            document.getElementById('studentInfo').textContent = 'Student: ' + studentName;
            
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen request failed:', err);
                });
            }
            
            examStarted = true;
            startTimer();
            initializeProctoring();
            initializeHighlighting();
        }

        function initializeHighlighting() {
            const passageContent = document.getElementById('passageContent');
            makeHighlightable(passageContent);
        }

        function makeHighlightable(element) {
            element.addEventListener('mouseup', function() {
                const selection = window.getSelection();
                const selectedText = selection.toString().trim();
                
                if (selectedText.length > 0) {
                    const range = selection.getRangeAt(0);
                    const span = document.createElement('span');
                    span.className = 'highlight';
                    
                    try {
                        range.surroundContents(span);
                    } catch (e) {
                        console.log('Cannot highlight across multiple elements');
                    }
                    
                    selection.removeAllRanges();
                }
            });

            element.addEventListener('click', function(e) {
                if (e.target.classList.contains('highlight')) {
                    const parent = e.target.parentNode;
                    while (e.target.firstChild) {
                        parent.insertBefore(e.target.firstChild, e.target);
                    }
                    parent.removeChild(e.target);
                }
            });
        }

        function initializeProctoring() {
            window.addEventListener('blur', handleViolation);
            
            document.addEventListener('visibilitychange', function() {
                if (document.hidden && examStarted) {
                    handleViolation();
                }
            });
            
            document.addEventListener('fullscreenchange', function() {
                if (!document.fullscreenElement && examStarted) {
                    handleViolation();
                }
            });
            
            document.addEventListener('webkitfullscreenchange', function() {
                if (!document.webkitFullscreenElement && examStarted) {
                    handleViolation();
                }
            });
            
            document.addEventListener('mozfullscreenchange', function() {
                if (!document.mozFullScreenElement && examStarted) {
                    handleViolation();
                }
            });
            
            document.addEventListener('contextmenu', function(e) {
                if (examStarted) {
                    e.preventDefault();
                }
            });
            
            document.addEventListener('keydown', function(e) {
                if (examStarted) {
                    if (e.altKey || e.metaKey || (e.ctrlKey && e.key === 'Tab')) {
                        handleViolation();
                    }
                    if (e.key === 'F11') {
                        e.preventDefault();
                    }
                }
            });
        }

        function handleViolation() {
            if (!examStarted) return;
            
            violationCount++;
            document.getElementById('violationCount').textContent = violationCount;
            document.getElementById('violationLog').classList.add('active');
            
            const alert = document.getElementById('proctoringAlert');
            const message = document.getElementById('violationMessage');
            const blackout = document.getElementById('blackoutOverlay');
            
            message.textContent = 'Violation detected! Enter the reactivation code to continue. You have 60 seconds.';
            
            blackout.classList.add('active');
            alert.classList.add('active');
            document.getElementById('reactivationInput').value = '';
            document.getElementById('reactivationInput').focus();
            
            startReactivationTimer();
        }

        function startReactivationTimer() {
            reactivationTimeLeft = 60;
            document.getElementById('reactivationTimer').textContent = reactivationTimeLeft;
            
            if (reactivationTimerInterval) {
                clearInterval(reactivationTimerInterval);
            }
            
            reactivationTimerInterval = setInterval(() => {
                reactivationTimeLeft--;
                document.getElementById('reactivationTimer').textContent = reactivationTimeLeft;
                
                if (reactivationTimeLeft <= 0) {
                    clearInterval(reactivationTimerInterval);
                    terminateExam();
                }
            }, 1000);
        }

        function verifyReactivation() {
            const input = document.getElementById('reactivationInput').value.trim();
            const errorDiv = document.getElementById('reactivationError');
            
            if (input === CORRECT_CODE) {
                clearInterval(reactivationTimerInterval);
                errorDiv.style.display = 'none';
                document.getElementById('proctoringAlert').classList.remove('active');
                document.getElementById('blackoutOverlay').classList.remove('active');
                
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log('Cannot re-enter fullscreen:', err);
                    });
                }
            } else {
                errorDiv.style.display = 'block';
                document.getElementById('reactivationInput').value = '';
                document.getElementById('reactivationInput').focus();
            }
        }

        function terminateExam() {
            examStarted = false;
            clearInterval(timerInterval);
            clearInterval(reactivationTimerInterval);
            
            alert('Test terminated due to failure to enter reactivation code in time.');
            
            const data = collectAnswers();
            data.terminated = true;
            data.terminationReason = 'Failed to enter reactivation code';
            
            submitExamData(data);
        }

        function startTimer() {
            let timeLeft = 3600; // 60 minutes
            
            timerInterval = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoSubmitExam();
                }
            }, 1000);
        }

        function showView(view) {
            const passagePanel = document.getElementById('passagePanel');
            const questionsPanel = document.getElementById('questionsPanel');
            const navBtns = document.querySelectorAll('.nav-btn');
            
            navBtns.forEach(btn => btn.classList.remove('active'));
            
            if (view === 'passage') {
                passagePanel.style.display = 'block';
                questionsPanel.style.display = 'none';
                passagePanel.style.flex = '1';
                navBtns[0].classList.add('active');
            } else if (view === 'questions') {
                passagePanel.style.display = 'none';
                questionsPanel.style.display = 'block';
                questionsPanel.style.flex = '1';
                navBtns[1].classList.add('active');
            } else if (view === 'both') {
                passagePanel.style.display = 'block';
                questionsPanel.style.display = 'block';
                passagePanel.style.flex = '1';
                questionsPanel.style.flex = '1';
                navBtns[2].classList.add('active');
            }
        }

        function selectTF(questionNum, value) {
            const questionItem = event.target.closest('.question-item');
            questionItem.querySelectorAll('.tf-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');
            tfAnswers[questionNum] = value;
        }

        function collectAnswers() {
            const answers = {};
            
            // Collect TRUE/FALSE/NOT GIVEN answers
            Object.keys(tfAnswers).forEach(key => {
                answers[key] = tfAnswers[key];
            });
            
            // Fill in any unanswered T/F/NG questions
            for (let i = 1; i <= 8; i++) {
                if (!answers[i.toString()]) {
                    answers[i.toString()] = '(not answered)';
                }
            }
            
            // Collect text input answers
            document.querySelectorAll('.answer-input').forEach(input => {
                const questionNum = input.getAttribute('data-question');
                if (questionNum) {
                    answers[questionNum] = input.value.trim() || '(not answered)';
                }
            });
            
            return { studentName, answers, violationCount };
        }

        function formatAnswerSheet(data) {
            let sheet = `EDUNEST - IELTS MOCK EXAM
Reading Test 2 - Passage 1 Answer Sheet
═══════════════════════════════════════

Student Name: ${data.studentName}
Date: ${new Date().toLocaleDateString()}
Time: ${new Date().toLocaleTimeString()}
Test Code: C16T2P1
Reactivation Code: ${CORRECT_CODE}
Proctoring Violations: ${data.violationCount}
${data.terminated ? 'Status: TERMINATED - ' + data.terminationReason : 'Status: Completed'}

═══════════════════════════════════════

READING PASSAGE 1: The White Horse of Uffington
───────────────────────────────────────

Questions 1-8 (TRUE/FALSE/NOT GIVEN):
`;
            
            for (let i = 1; i <= 8; i++) {
                sheet += `\n${i}.  ${data.answers[i.toString()] || '(not answered)'}`;
            }
            
            sheet += `\n\nQuestions 9-13 (Summary Completion):
───────────────────────────────────────`;
            
            for (let i = 9; i <= 13; i++) {
                sheet += `\n${i}.  ${data.answers[i.toString()] || '(not answered)'}`;
            }
            
            sheet += `\n\n═══════════════════════════════════════\nEnd of Answer Sheet`;
            
            return sheet;
        }

        async function generatePDF(data) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(20);
            doc.setTextColor(220, 38, 38);
            doc.text('EDUNEST', 105, 20, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text('IELTS MOCK EXAM - Reading Test 2', 105, 30, { align: 'center' });
            doc.text('Passage 1: The White Horse of Uffington', 105, 38, { align: 'center' });
            doc.text('Answer Sheet', 105, 46, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            doc.text(`Student Name: ${data.studentName}`, 20, 58);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 64);
            doc.text(`Time: ${new Date().toLocaleTimeString()}`, 20, 70);
            doc.text(`Test Code: C16T2P1`, 20, 76);
            doc.text(`Reactivation Code: ${CORRECT_CODE}`, 20, 82);
            doc.text(`Violations: ${data.violationCount}`, 20, 88);
            if (data.terminated) {
                doc.setTextColor(220, 38, 38);
                doc.text(`Status: TERMINATED - ${data.terminationReason}`, 20, 94);
                doc.setTextColor(0, 0, 0);
            }
            
            let y = data.terminated ? 105 : 100;
            
            // Questions 1-8
            doc.setFontSize(12);
            doc.setTextColor(220, 38, 38);
            doc.text('Questions 1-8 (TRUE/FALSE/NOT GIVEN)', 20, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            for (let i = 1; i <= 8; i++) {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                doc.text(`${i}.  ${data.answers[i.toString()] || '(not answered)'}`, 25, y);
                y += 6;
            }
            
            y += 5;
            
            // Questions 9-13
            if (y > 250) {
                doc.addPage();
                y = 20;
            }
            
            doc.setFontSize(12);
            doc.setTextColor(220, 38, 38);
            doc.text('Questions 9-13 (Summary Completion)', 20, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            for (let i = 9; i <= 13; i++) {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                doc.text(`${i}.  ${data.answers[i.toString()] || '(not answered)'}`, 25, y);
                y += 6;
            }
            
            doc.save(`EDUNEST_Reading_C16T2P1_${data.studentName.replace(/\s+/g, '_')}_${new Date().getTime()}.pdf`);
        }

        async function submitExamData(data) {
            const answerSheet = formatAnswerSheet(data);
            
            document.getElementById('answerSheet').textContent = answerSheet;
            document.getElementById('resultsModal').style.display = 'flex';
            
            await generatePDF(data);
            
            const telegramText = `🎓 EDUNEST - IELTS MOCK EXAM
📖 Reading Test 2 - Passage 1

👤 Name: ${data.studentName}
📅 Date: ${new Date().toLocaleDateString()}
⏰ Time: ${new Date().toLocaleTimeString()}
📝 Test: The White Horse of Uffington
🔑 Code: ${CORRECT_CODE}
⚠️ Violations: ${data.violationCount}
${data.terminated ? '🚫 Status: TERMINATED - ' + data.terminationReason : '✅ Status: Completed'}

━━━━━━━━━━━━━━━━━━━━
ANSWERS:

Questions 1-8 (T/F/NG):
${Object.keys(data.answers).filter(k => parseInt(k) >= 1 && parseInt(k) <= 8).map(k => `${k}. ${data.answers[k]}`).join('\n')}

Questions 9-13 (Summary):
${Object.keys(data.answers).filter(k => parseInt(k) >= 9 && parseInt(k) <= 13).map(k => `${k}. ${data.answers[k]}`).join('\n')}`;

            try {
                await fetch('https://mdrx18.pythonanywhere.com/api/telegram/send/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: telegramText,
                        send_to_all_admins: true,
                    })
                });
            } catch (error) {
                console.error('Error sending to Telegram:', error);
            }
            
            if (document.exitFullscreen) {
                document.exitFullscreen().catch(err => {
                    console.log('Cannot exit fullscreen:', err);
                });
            }
        }

        async function submitExam() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            examStarted = false;
            
            const data = collectAnswers();
            
            if (!data.studentName) {
                return;
            }
            
            await submitExamData(data);
        }

        async function autoSubmitExam() {
            await submitExam();
        }

        function copyAnswers() {
            const answerSheet = document.getElementById('answerSheet').textContent;
            navigator.clipboard.writeText(answerSheet).then(() => {
                alert('Answers copied to clipboard!');
            });
        }

        function closeResults() {
            document.getElementById('resultsModal').style.display = 'none';
        }
    </script>
</body>
</html>