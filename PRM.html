<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Test 3 - IELTS Reading Test - EDUNEST</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: #f5f7fa;
            height: 100vh;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        .welcome-screen {
            width: 100%;
            height: 100vh;
            background: white;
            overflow-y: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        .welcome-header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 50px 40px;
            text-align: center;
            border-bottom: 3px solid #991b1b;
            flex-shrink: 0;
        }

        .welcome-brand {
            font-size: 42px;
            font-weight: bold;
            letter-spacing: 3px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .welcome-title {
            font-size: 24px;
            font-weight: normal;
            opacity: 0.95;
            letter-spacing: 1px;
        }

        .welcome-content {
            flex: 1;
            padding: 60px 40px;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .welcome-header {
                padding: 30px 20px;
            }

            .welcome-brand {
                font-size: 32px;
                letter-spacing: 2px;
            }

            .welcome-title {
                font-size: 18px;
            }

            .welcome-content {
                padding: 30px 20px;
            }

            .password-section,
            .student-name-section {
                padding: 20px;
            }

            .password-label,
            .student-name-label {
                font-size: 14px;
            }

            .password-input,
            .student-name-input {
                font-size: 16px;
                padding: 10px 12px;
            }

            .instructions-title {
                font-size: 18px;
            }

            .instructions-list li {
                font-size: 14px;
                padding: 10px 0 10px 25px;
            }

            .start-button {
                font-size: 18px;
                padding: 15px;
            }
        }

        .password-section {
            margin-bottom: 30px;
            padding: 25px;
            background: #fef2f2;
            border: 2px solid #dc2626;
            border-radius: 8px;
        }

        .password-label {
            display: block;
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .password-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .password-input:focus {
            outline: none;
            border-color: #991b1b;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .student-name-section {
            margin-bottom: 30px;
            padding: 25px;
            background: #fef2f2;
            border: 2px solid #dc2626;
            border-radius: 8px;
        }

        .student-name-label {
            display: block;
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .student-name-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .student-name-input:focus {
            outline: none;
            border-color: #991b1b;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .instructions-section {
            margin-bottom: 30px;
        }

        .instructions-title {
            font-size: 20px;
            color: #991b1b;
            margin-bottom: 15px;
            font-weight: bold;
            border-bottom: 2px solid #dc2626;
            padding-bottom: 10px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
        }

        .instructions-list li {
            padding: 12px 0 12px 30px;
            position: relative;
            color: #374151;
            line-height: 1.6;
        }

        .instructions-list li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #dc2626;
            font-weight: bold;
            font-size: 18px;
        }

        .start-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .start-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .exam-container {
            display: none;
            height: 100vh;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 15px 30px;
            border-bottom: 2px solid #991b1b;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .header {
                padding: 12px 15px;
            }

            .brand {
                font-size: 20px;
            }

            .exam-title {
                font-size: 14px;
            }

            .timer-display {
                font-size: 22px;
            }

            .navigation-bar {
                padding: 12px 15px;
                flex-direction: column;
                gap: 12px;
            }

            .passage-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .passage-btn {
                padding: 8px 15px;
                font-size: 14px;
                flex: 1;
            }

            .student-info {
                font-size: 14px;
                text-align: center;
                width: 100%;
            }
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .brand {
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .exam-title {
            font-size: 16px;
            opacity: 0.95;
        }

        .timer-display {
            font-size: 28px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .navigation-bar {
            background: #fef2f2;
            padding: 15px 30px;
            border-bottom: 2px solid #dc2626;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .passage-buttons {
            display: flex;
            gap: 15px;
        }

        .passage-btn {
            padding: 10px 25px;
            background: white;
            color: #dc2626;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .passage-btn:hover {
            background: #fef2f2;
        }

        .passage-btn.active {
            background: #dc2626;
            color: white;
        }

        .student-info {
            color: #991b1b;
            font-weight: bold;
        }

        .main-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .passage-panel {
                width: 100%;
                height: 50%;
                border-right: none;
                border-bottom: 3px solid #dc2626;
                padding: 20px 15px;
            }

            .questions-panel {
                width: 100%;
                height: 50%;
                padding: 20px 15px;
            }

            .passage-title {
                font-size: 24px;
            }

            .passage-subtitle {
                font-size: 16px;
            }

            .passage-text {
                font-size: 15px;
                line-height: 1.6;
            }

            .question-header {
                font-size: 16px;
                padding: 12px;
            }

            .question-instructions {
                font-size: 14px;
                padding: 12px;
            }

            .question-item {
                padding: 15px;
            }

            .question-text {
                font-size: 15px;
            }

            .answer-input {
                font-size: 15px;
                padding: 8px;
            }

            .option {
                padding: 10px;
                font-size: 14px;
            }
        }

        .passage-panel {
            width: 50%;
            overflow-y: auto;
            padding: 30px;
            border-right: 3px solid #dc2626;
            background: white;
        }

        .questions-panel {
            width: 50%;
            overflow-y: auto;
            padding: 30px;
            background: #f9fafb;
        }

        .passage-content {
            display: none;
        }

        .passage-content.active {
            display: block;
        }

        .passage-title {
            font-size: 32px;
            color: #dc2626;
            margin-bottom: 10px;
            font-weight: bold;
            text-align: center;
        }

        .passage-subtitle {
            font-size: 20px;
            color: #991b1b;
            margin-bottom: 30px;
            font-style: italic;
            text-align: center;
        }

        .passage-text {
            font-size: 16px;
            line-height: 1.8;
            color: #1f2937;
            margin-bottom: 20px;
            text-align: justify;
        }

        .passage-text::selection {
            background-color: #fef08a;
        }

        .highlighted {
            background-color: #fef08a;
            padding: 2px 0;
        }

        .question-group {
            display: none;
            margin-bottom: 30px;
        }

        .question-group.active {
            display: block;
        }

        .question-header {
            background: #dc2626;
            color: white;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            font-size: 18px;
            font-weight: bold;
        }

        .question-instructions {
            background: #fef2f2;
            padding: 15px;
            border: 2px solid #dc2626;
            border-top: none;
            border-radius: 0 0 8px 8px;
            margin-bottom: 20px;
            color: #991b1b;
            font-weight: bold;
        }

        .question-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid #dc2626;
            border-radius: 8px;
        }

        .question-item::selection {
            background-color: #fef08a;
        }

        .question-text {
            color: #1f2937;
            font-size: 16px;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .answer-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #991b1b;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            background: #fef2f2;
        }

        .option.selected {
            background: #dc2626;
            color: white;
        }

        .option input[type="radio"] {
            cursor: pointer;
        }

        .submit-section {
            background: #fef2f2;
            padding: 20px 30px;
            border-top: 2px solid #dc2626;
            text-align: center;
        }

        @media (max-width: 768px) {
            .submit-section {
                padding: 15px;
            }

            .submit-button {
                font-size: 16px;
                padding: 12px 30px;
                width: 100%;
            }

            .results-content {
                margin: 20px;
                padding: 20px;
                max-width: calc(100% - 40px);
                max-height: calc(100vh - 40px);
            }

            .results-header {
                margin: -20px -20px 15px -20px;
                padding: 15px;
            }

            .results-header h2 {
                font-size: 20px;
            }

            .answer-sheet {
                font-size: 12px;
                padding: 15px;
            }

            .results-buttons {
                flex-direction: column;
            }

            .results-button {
                width: 100%;
            }

            .proctoring-content {
                margin: 20px;
                padding: 30px 20px;
                max-width: calc(100% - 40px);
            }

            .proctoring-icon {
                font-size: 60px;
            }

            .proctoring-title {
                font-size: 24px;
            }

            .proctoring-message {
                font-size: 16px;
            }

            .reactivation-input {
                font-size: 16px;
                padding: 12px;
            }

            .reactivation-button {
                font-size: 16px;
                padding: 12px;
            }
        }

        .submit-button {
            padding: 15px 50px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .results-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .results-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .results-header {
            background: #dc2626;
            color: white;
            padding: 20px;
            margin: -30px -30px 20px -30px;
            border-radius: 8px 8px 0 0;
            text-align: center;
        }

        .results-header h2 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .answer-sheet {
            background: #f9fafb;
            padding: 20px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .results-buttons {
            display: flex;
            gap: 10px;
        }

        .results-button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-button {
            background: #dc2626;
            color: white;
        }

        .copy-button:hover {
            background: #b91c1c;
        }

        .close-button {
            background: #6b7280;
            color: white;
        }

        .close-button:hover {
            background: #4b5563;
        }

        .proctoring-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(220, 38, 38, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .proctoring-content {
            background: white;
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .proctoring-icon {
            font-size: 80px;
            color: #dc2626;
            margin-bottom: 20px;
        }

        .proctoring-title {
            font-size: 28px;
            color: #dc2626;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .proctoring-message {
            font-size: 18px;
            color: #4b5563;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .reactivation-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dc2626;
            border-radius: 4px;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }

        .reactivation-button {
            width: 100%;
            padding: 15px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reactivation-button:hover {
            background: #b91c1c;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #dc2626;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #b91c1c;
        }
    </style>
</head>
<body>
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-header">
            <div class="welcome-brand">EDUNEST</div>
            <div class="welcome-title">IELTS Mock Exam - Reading Test 3</div>
        </div>
        <div class="welcome-content">
            <div class="password-section">
                <label class="password-label">Enter Password:</label>
                <input type="password" id="passwordInput" class="password-input" placeholder="Enter password to access exam">
            </div>

            <div class="student-name-section">
                <label class="student-name-label">Your Full Name:</label>
                <input type="text" id="studentName" class="student-name-input" placeholder="Enter your full name" disabled>
            </div>

            <div class="instructions-section">
                <div class="instructions-title">Important Instructions</div>
                <ul class="instructions-list">
                    <li>Total time: 60 minutes</li>
                    <li>3 passages with 40 questions total</li>
                    <li>Do not switch tabs or leave the window</li>
                    <li>Answers are automatically saved</li>
                    <li>You can highlight text by selecting it</li>
                    <li>Submit when you finish or time runs out</li>
                </ul>
            </div>

            <button class="start-button" id="startButton" onclick="startExam()" disabled>Start Exam</button>
        </div>
    </div>

    <div class="exam-container" id="examContainer">
        <div class="header">
            <div class="header-left">
                <div class="brand">EDUNEST</div>
                <div class="exam-title">IELTS Reading Test 3</div>
            </div>
            <div class="timer-display" id="timer">60:00</div>
        </div>

        <div class="navigation-bar">
            <div class="passage-buttons">
                <button class="passage-btn active" onclick="switchPassage(1)">Passage 1</button>
                <button class="passage-btn" onclick="switchPassage(2)">Passage 2</button>
                <button class="passage-btn" onclick="switchPassage(3)">Passage 3</button>
            </div>
            <div class="student-info">Student: <span id="studentNameDisplay"></span></div>
        </div>

        <div class="main-content">
            <div class="passage-panel" id="passagePanel">
                <!-- Passage 1 -->
                <div class="passage-content active" id="passage1">
                    <div class="passage-title">THE STORY OF SILK</div>
                    <div class="passage-subtitle">The history of the world's most luxurious fabric, from ancient China to the present day</div>
                    
                    <div class="passage-text">
                        Silk is a fine, smooth material produced from the cocoons - soft protective shells - that are made by mulberry silkworms (insect larvae). Legend has it that it was Lei Tzu, wife of the Yellow Emperor, ruler of China in about 3000 BC, who discovered silkworms. One account of the story goes that as she was taking a walk in her husband's gardens, she discovered that silkworms were responsible for the destruction of several mulberry trees. She collected a number of cocoons and sat down to have a rest. It just so happened that while she was sipping some tea, one of the cocoons that she had collected landed in the hot tea and started to unravel into a fine thread. Lei Tzu found that she could wind this thread around her fingers. Subsequently, she persuaded her husband to allow her to rear silkworms on a grove of mulberry trees. She also devised a special reel to draw the fibres from the cocoon into a single thread so that they would be strong enough to be woven into fabric. While it is unknown just how much of this is true, it is certainly known that silk cultivation has existed in China for several millennia.
                    </div>

                    <div class="passage-text">
                        Originally, silkworm farming was solely restricted to women, and it was they who were responsible for the growing, harvesting and weaving. Silk quickly grew into a symbol of status, and originally, only royalty were entitled to have clothes made of silk. The rules were gradually relaxed over the years until finally during the Qing Dynasty (1644-1911 AD), even peasants, the lowest caste, were also entitled to wear silk. Sometime during the Han Dynasty (206 BC-220 AD), silk was so prized that it was also used as a unit of currency. Government officials were paid their salary in silk, and farmers paid their taxes in grain and silk. Silk was also used as diplomatic gifts by the emperor. Fishing lines, bowstrings, musical instruments and paper were all made using silk. The earliest indication of silk paper being used was discovered in the tomb of a noble who is estimated to have died around 168 AD.
                    </div>

                    <div class="passage-text">
                        Demand for this exotic fabric eventually created the lucrative trade route now known as the Silk Road, taking silk westward and bringing gold, silver and wool to the East. It was named the Silk Road after its most precious commodity, which was considered to be worth more than gold. The Silk Road stretched over 6,000 kilometres from Eastern China to the Mediterranean Sea, following the Great Wall of China, climbing the Pamir mountain range, crossing modern-day Afghanistan and going on to the Middle East, with a major trading market in Damascus. From there, the merchandise was shipped across the Mediterranean Sea. Few merchants travelled the entire route; goods were handled mostly by a series of middlemen.
                    </div>

                    <div class="passage-text">
                        With the mulberry silkworm being native to China, the country was the world's sole producer of silk for many hundreds of years. The secret of silk-making eventually reached the rest of the world via the Byzantine Empire, which ruled over the Mediterranean region of southern Europe, North Africa and the Middle East during the period 330-1453 AD. According to another legend, monks working for the Byzantine emperor Justinian smuggled silkworm eggs to Constantinople (Istanbul in modern-day Turkey) in 550 AD, concealed inside hollow bamboo walking canes. The Byzantines were as secretive as the Chinese, however, and for many centuries the weaving and trading of silk fabric was a strict imperial monopoly. Then in the seventh century, the Arabs conquered Persia, capturing their magnificent silks in the process. Silk production thus spread through Africa, Sicily and Spain as the Arabs swept through these lands. Andalusia in southern Spain was Europe's main silk-producing centre in the tenth century. By the thirteenth century, however, Italy had become Europe's leader in silk production and export. Venetian merchants traded extensively in silk and encouraged silk growers to settle in Italy. Even now, silk processed in the province of Como in northern Italy enjoys an esteemed reputation.
                    </div>

                    <div class="passage-text">
                        The nineteenth century and industrialisation saw the downfall of the European silk industry. Cheaper Japanese silk, trade in which was greatly facilitated by the opening of the Suez Canal, was one of the many factors driving the trend. Then in the twentieth century, new manmade fibres, such as nylon, started to be used in what had traditionally been silk products, such as stockings and parachutes. The two world wars, which interrupted the supply of raw material from Japan, also stifled the European silk industry. After the Second World War, Japan's silk production was restored, with improved production and quality of raw silk. Japan was to remain the world's biggest producer of raw silk, and practically the only major exporter of raw silk, until the 1970s. However, in more recent decades, China has gradually recaptured its position as the world's biggest producer and exporter of raw silk and silk yarn. Today, around 125,000 metric tons of silk are produced in the world, and almost two thirds of that production takes place in China.
                    </div>
                </div>

                <!-- Passage 2 -->
                <div class="passage-content" id="passage2">
                    <div class="passage-title">Great Migrations</div>
                    
                    <div class="passage-text">
                        Animal migration, however it is defined, is far more than just the movement of animals. It can loosely be described as travel that takes place at regular intervals - often in an annual cycle - that may involve many members of a species, and is rewarded only after a long journey. It suggests inherited instinct. The biologist Hugh Dingle has identified five characteristics that apply, in varying degrees and combinations, to all migrations. They are prolonged movements that carry animals outside familiar habitats; they tend to be linear, not zigzaggy; they involve special behaviours concerning preparation (such as overfeeding) and arrival; they demand special allocations of energy. And one more: migrating animals maintain an intense attentiveness to the greater mission, which keeps them undistracted by temptations and undeterred by challenges that would turn other animals aside.
                    </div>

                    <div class="passage-text">
                        An arctic tern, on its 20,000 km flight from the extreme south of South America to the Arctic circle, will take no notice of a nice smelly herring offered from a bird-watcher's boat along the way. While local gulls will dive voraciously for such handouts, the tern flies on. Why? The arctic tern resists distraction because it is driven at that moment by an instinctive sense of something we humans find admirable: larger purpose. In other words, it is determined to reach its destination. The bird senses that it can eat, rest and mate later. Right now it is totally focused on the journey; its undivided intent is arrival. Reaching some gravelly coastline in the Arctic, upon which other arctic terns have converged, will serve its larger purpose as shaped by evolution: finding a place, a time, and a set of circumstances in which it can successfully hatch and rear offspring.
                    </div>

                    <div class="passage-text">
                        But migration is a complex issue, and biologists define it differently, depending in part on what sorts of animals they study. Joel Berger, of the University of Montana, who works on the American pronghorn and other large terrestrial mammals, prefers what he calls a simple, practical definition suited to his beasts: 'movements from a seasonal home area away to another home area and back again'. Generally the reason for such seasonal back-and-forth movement is to seek resources that aren't available within a single area year-round.
                    </div>

                    <div class="passage-text">
                        But daily vertical movements by zooplankton in the ocean - upward by night to seek food, downward by day to escape predators - can also be considered migration. So can the movement of aphids when, having depleted the young leaves on one food plant, their offspring then fly onward to a different host plant, with no one aphid ever returning to where it started.
                    </div>

                    <div class="passage-text">
                        Dingle is an evolutionary biologist who studies insects. His definition is more intricate than Berger's, citing those five features that distinguish migration from other forms of movement. They allow for the fact that, for example, aphids will become sensitive to blue light (from the sky) when it's time for takeoff on their big journey, and sensitive to yellow light (reflected from tender young leaves) when it's appropriate to land. Birds will fatten themselves with heavy feeding in advance of a long migrational flight. The value of his definition, Dingle argues, is that it focuses attention on what the phenomenon of wildebeest migration shares with the phenomenon of the aphids, and therefore helps guide researchers towards understanding how evolution has produced them all.
                    </div>

                    <div class="passage-text">
                        Human behaviour, however, is having a detrimental impact on animal migration. The pronghorn, which resembles an antelope, though they are unrelated, is the fastest land mammal of the New World. One population, which spends the summer in the mountainous Grand Teton National Park of the western USA, follows a narrow route from its summer range in the mountains, across a river, and down onto the plains. Here they wait out the frozen months, feeding mainly on sagebrush blown clear of snow. These pronghorn are notable for the invariance of their migration route and the severity of its constriction at three bottlenecks. If they can't pass through each of the three during their spring migration, they can't reach their bounty of summer grazing; if they can't pass through again in autumn, escaping south onto those windblown plains, they are likely to die trying to overwinter in the deep snow. Pronghorn, dependent on distance vision and speed to keep safe from predators, traverse high, open shoulders of land, where they can see and run. At one of the bottlenecks, forested hills rise to form a V, leaving a corridor of open ground only about 150 metres wide, filled with private homes. Increasing development is leading toward a crisis for the pronghorn, threatening to choke off their passageway.
                    </div>

                    <div class="passage-text">
                        Conservation scientists, along with some biologists and land managers within the USA's National Park Service and other agencies, are now working to preserve migrational behaviours, not just species and habitats. A National Forest has recognised the path of the pronghorn, much of which passes across its land, as a protected migration corridor. But neither the Forest Service nor the Park Service can control what happens on private land at a bottleneck. And with certain other migrating species, the challenge is complicated further - by vastly greater distances traversed, more jurisdictions, more borders, more dangers along the way. We will require wisdom and resoluteness to ensure that migrating species can continue their journeying a while longer.
                    </div>
                </div>

                <!-- Passage 3 -->
                <div class="passage-content" id="passage3">
                    <div class="passage-title">Preface to 'How the other half thinks: Adventures in mathematical reasoning'</div>
                    
                    <div class="passage-text">
                        <strong>A.</strong> Occasionally, in some difficult musical compositions, there are beautiful, but easy parts - parts so simple a beginner could play them. So it is with mathematics as well. There are some discoveries in advanced mathematics that do not depend on specialized knowledge, not even on algebra, geometry, or trigonometry. Instead they may involve, at most, a little arithmetic, such as 'the sum of two odd numbers is even', and common sense. Each of the eight chapters in this book illustrates this phenomenon. Anyone can understand every step in the reasoning.
                    </div>

                    <div class="passage-text">
                        The thinking in each chapter uses at most only elementary arithmetic, and sometimes not even that. Thus all readers will have the chance to participate in a mathematical experience, to appreciate the beauty of mathematics, and to become familiar with its logical, yet intuitive, style of thinking.
                    </div>

                    <div class="passage-text">
                        <strong>B.</strong> One of my purposes in writing this book is to give readers who haven't had the opportunity to see and enjoy real mathematics the chance to appreciate the mathematical way of thinking. I want to reveal not only some of the fascinating discoveries, but, more importantly, the reasoning behind them.
                    </div>

                    <div class="passage-text">
                        In that respect, this book differs from most books on mathematics written for the general public. Some present the lives of colorful mathematicians. Others describe important applications of mathematics. Yet others go into mathematical procedures, but assume that the reader is adept in using algebra.
                    </div>

                    <div class="passage-text">
                        <strong>C.</strong> I hope this book will help bridge that notorious gap that separates the two cultures: the humanities and the sciences, or should I say the right brain (intuitive) and the left brain (analytical, numerical). As the chapters will illustrate, mathematics is not restricted to the analytical and numerical; intuition plays a significant role. The alleged gap can be narrowed or completely overcome by anyone, in part because each of us is far from using the full capacity of either side of the brain. To illustrate our human potential, I cite a structural engineer who is an artist, an electrical engineer who is an opera singer, an opera singer who published mathematical research, and a mathematician who publishes short stories.
                    </div>

                    <div class="passage-text">
                        <strong>D.</strong> Other scientists have written books to explain their fields to non-scientists, but have necessarily had to omit the mathematics, although it provides the foundation of their theories. The reader must remain a tantalized spectator rather than an involved participant, since the appropriate language for describing the details in much of science is mathematics, whether the subject is expanding universe, subatomic particles, or chromosomes. Though the broad outline of a scientific theory can be sketched intuitively, when a part of the physical universe is finally understood, its description often looks like a page in a mathematics text.
                    </div>

                    <div class="passage-text">
                        <strong>E.</strong> Still, the non-mathematical reader can go far in understanding mathematical reasoning. This book presents the details that illustrate the mathematical style of thinking, which involves sustained, step-by-step analysis, experiments, and insights. You will turn these pages much more slowly than when reading a novel or a newspaper. It may help to have a pencil and paper ready to check claims and carry out experiments.
                    </div>

                    <div class="passage-text">
                        <strong>F.</strong> As I wrote, I kept in mind two types of readers: those who enjoyed mathematics until they were turned off by an unpleasant episode, usually around fifth grade, and mathematics aficionados, who will find much that is new throughout the book.
                    </div>

                    <div class="passage-text">
                        This book also serves readers who simply want to sharpen their analytical skills. Many careers, such as law and medicine, require extended, precise analysis. Each chapter offers practice in following a sustained and closely argued line of thought. That mathematics can develop this skill is shown by these two testimonials:
                    </div>

                    <div class="passage-text">
                        <strong>G.</strong> A physician wrote, 'The discipline of analytical thought processes [in mathematics] prepared me extremely well for medical school. In medicine one is faced with a problem which must be thoroughly analyzed before a solution can be found. The process is similar to doing mathematics.'
                    </div>

                    <div class="passage-text">
                        A lawyer made the same point, 'Although I had no background in law - not even one political science course - I did well at one of the best law schools. I attribute much of my success there to having learned, through the study of mathematics, and, in particular, theorems, how to analyze complicated principles. Lawyers who have studied mathematics can master the legal principles in a way that most others cannot.'
                    </div>

                    <div class="passage-text">
                        I hope you will share my delight in watching as simple, even naive, questions lead to remarkable solutions and purely theoretical discoveries find unanticipated applications.
                    </div>
                </div>
            </div>

            <div class="questions-panel" id="questionsPanel">
                <!-- Questions for Passage 1 -->
                <div class="question-group active" id="questions1">
                    <div class="question-header">Questions 1-9</div>
                    <div class="question-instructions">Complete the notes below. Choose ONE WORD ONLY from the passage for each answer.</div>
                    
                    <div class="question-item">
                        <div class="question-text"><strong>1.</strong> Around 3000 BC, according to legend, a silkworm cocoon fell into the emperor's wife's __________.</div>
                        <input type="text" class="answer-input" data-question="1">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>2.</strong> The emperor's wife invented a __________ to pull out silk fibres.</div>
                        <input type="text" class="answer-input" data-question="2">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>3.</strong> Only __________ were allowed to produce silk.</div>
                        <input type="text" class="answer-input" data-question="3">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>4.</strong> Only __________ were allowed to wear silk.</div>
                        <input type="text" class="answer-input" data-question="4">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>5.</strong> Silk was used as a form of __________. For example, farmers' taxes consisted partly of silk.</div>
                        <input type="text" class="answer-input" data-question="5">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>6.</strong> Evidence was found of __________ made from silk around 168 AD.</div>
                        <input type="text" class="answer-input" data-question="6">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>7.</strong> Merchants used the Silk Road to take silk westward and bring back __________ and precious metals.</div>
                        <input type="text" class="answer-input" data-question="7">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>8.</strong> In 550 AD, __________ hid silkworm eggs in canes and took them to Constantinople.</div>
                        <input type="text" class="answer-input" data-question="8">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>9.</strong> In the 20th century, __________ and other manmade fibres caused a decline in silk production.</div>
                        <input type="text" class="answer-input" data-question="9">
                    </div>

                    <div class="question-header" style="margin-top: 30px;">Questions 10-13</div>
                    <div class="question-instructions">Do the following statements agree with the information in Reading Passage 1?<br>Write TRUE if the statement agrees with the information, FALSE if the statement contradicts the information, or NOT GIVEN if there is no information on this.</div>

                    <div class="question-item">
                        <div class="question-text"><strong>10.</strong> Gold was the most valuable material transported along the Silk Road.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q10" value="TRUE" data-question="10"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="FALSE" data-question="10"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="NOT GIVEN" data-question="10"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>11.</strong> Most tradesmen only went along certain sections of the Silk Road.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q11" value="TRUE" data-question="11"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q11" value="FALSE" data-question="11"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q11" value="NOT GIVEN" data-question="11"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>12.</strong> The Byzantines spread the practice of silk production across the West.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q12" value="TRUE" data-question="12"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q12" value="FALSE" data-question="12"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q12" value="NOT GIVEN" data-question="12"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>13.</strong> Silk yarn makes up the majority of silk currently exported from China.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q13" value="TRUE" data-question="13"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q13" value="FALSE" data-question="13"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q13" value="NOT GIVEN" data-question="13"> NOT GIVEN
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Questions for Passage 2 -->
                <div class="question-group" id="questions2">
                    <div class="question-header">Questions 14-18</div>
                    <div class="question-instructions">Do the following statements agree with the information in Reading Passage 2?<br>Write TRUE if the statement agrees with the information, FALSE if the statement contradicts the information, or NOT GIVEN if there is no information on this.</div>

                    <div class="question-item">
                        <div class="question-text"><strong>14.</strong> Local gulls and migrating arctic terns behave in the same way when offered food.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q14" value="TRUE" data-question="14"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q14" value="FALSE" data-question="14"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q14" value="NOT GIVEN" data-question="14"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>15.</strong> Experts' definitions of migration tend to vary according to their area of study.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q15" value="TRUE" data-question="15"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q15" value="FALSE" data-question="15"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q15" value="NOT GIVEN" data-question="15"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>16.</strong> Very few experts agree that the movement of aphids can be considered migration.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q16" value="TRUE" data-question="16"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q16" value="FALSE" data-question="16"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q16" value="NOT GIVEN" data-question="16"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>17.</strong> Aphids' journeys are affected by changes in the light that they perceive.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q17" value="TRUE" data-question="17"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q17" value="FALSE" data-question="17"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q17" value="NOT GIVEN" data-question="17"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>18.</strong> Dingle's aim is to distinguish between the migratory behaviours of different species.</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q18" value="TRUE" data-question="18"> TRUE
                            </label>
                            <label class="option">
                                <input type="radio" name="q18" value="FALSE" data-question="18"> FALSE
                            </label>
                            <label class="option">
                                <input type="radio" name="q18" value="NOT GIVEN" data-question="18"> NOT GIVEN
                            </label>
                        </div>
                    </div>

                    <div class="question-header" style="margin-top: 30px;">Questions 19-22</div>
                    <div class="question-instructions">Complete each sentence with the correct ending, A-G, below.</div>

                    <div class="question-item">
                        <div class="question-text"><strong>19.</strong> According to Dingle, migratory routes are likely to</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q19" value="A" data-question="19"> A. be discouraged by difficulties
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="B" data-question="19"> B. travel on open land where they can look out for predators
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="C" data-question="19"> C. eat more than they need for immediate purposes
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="D" data-question="19"> D. be repeated daily
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="E" data-question="19"> E. ignore distractions
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="F" data-question="19"> F. be governed by the availability of water
                            </label>
                            <label class="option">
                                <input type="radio" name="q19" value="G" data-question="19"> G. follow a straight line
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>20.</strong> To prepare for migration, animals are likely to</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q20" value="A" data-question="20"> A. be discouraged by difficulties
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="B" data-question="20"> B. travel on open land where they can look out for predators
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="C" data-question="20"> C. eat more than they need for immediate purposes
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="D" data-question="20"> D. be repeated daily
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="E" data-question="20"> E. ignore distractions
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="F" data-question="20"> F. be governed by the availability of water
                            </label>
                            <label class="option">
                                <input type="radio" name="q20" value="G" data-question="20"> G. follow a straight line
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>21.</strong> During migration, animals are unlikely to</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q21" value="A" data-question="21"> A. be discouraged by difficulties
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="B" data-question="21"> B. travel on open land where they can look out for predators
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="C" data-question="21"> C. eat more than they need for immediate purposes
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="D" data-question="21"> D. be repeated daily
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="E" data-question="21"> E. ignore distractions
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="F" data-question="21"> F. be governed by the availability of water
                            </label>
                            <label class="option">
                                <input type="radio" name="q21" value="G" data-question="21"> G. follow a straight line
                            </label>
                        </div>
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>22.</strong> Arctic terns illustrate migrating animals' ability to</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q22" value="A" data-question="22"> A. be discouraged by difficulties
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="B" data-question="22"> B. travel on open land where they can look out for predators
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="C" data-question="22"> C. eat more than they need for immediate purposes
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="D" data-question="22"> D. be repeated daily
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="E" data-question="22"> E. ignore distractions
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="F" data-question="22"> F. be governed by the availability of water
                            </label>
                            <label class="option">
                                <input type="radio" name="q22" value="G" data-question="22"> G. follow a straight line
                            </label>
                        </div>
                    </div>

                    <div class="question-header" style="margin-top: 30px;">Questions 23-26</div>
                    <div class="question-instructions">Complete the summary below. Choose ONE WORD ONLY from the passage for each answer.</div>

                    <div class="question-item">
                        <div class="question-text"><strong>23.</strong> Pronghorns rely on their eyesight and __________ to avoid predators.</div>
                        <input type="text" class="answer-input" data-question="23">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>24.</strong> One particular population's summer habitat is a national park, and their winter home is on the __________, where they go to avoid the danger presented by the snow at that time of year.</div>
                        <input type="text" class="answer-input" data-question="24">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>25.</strong> However, their route between these two areas contains three __________.</div>
                        <input type="text" class="answer-input" data-question="25">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>26.</strong> One problem is the construction of new homes in a narrow __________ of land on the pronghorns' route.</div>
                        <input type="text" class="answer-input" data-question="26">
                    </div>
                </div>

                <!-- Questions for Passage 3 -->
                <div class="question-group" id="questions3">
                    <div class="question-header">Questions 27-34</div>
                    <div class="question-instructions">Reading Passage 3 has seven sections, A-G. Which section contains the following information?</div>

                    <div class="question-item">
                        <div class="question-text"><strong>27.</strong> A reference to books that assume a lack of mathematical knowledge</div>
                        <input type="text" class="answer-input" data-question="27" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>28.</strong> The way in which this is not a typical book about mathematics</div>
                        <input type="text" class="answer-input" data-question="28" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>29.</strong> Personal examples of being helped by mathematics</div>
                        <input type="text" class="answer-input" data-question="29" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>30.</strong> Examples of people who each had abilities that seemed incompatible</div>
                        <input type="text" class="answer-input" data-question="30" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>31.</strong> Mention of different focuses of books about mathematics</div>
                        <input type="text" class="answer-input" data-question="31" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>32.</strong> A contrast between reading this book and reading other kinds of publication</div>
                        <input type="text" class="answer-input" data-question="32" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>33.</strong> A claim that the whole of the book is accessible to everybody</div>
                        <input type="text" class="answer-input" data-question="33" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>34.</strong> A reference to different categories of intended readers of this book</div>
                        <input type="text" class="answer-input" data-question="34" placeholder="Enter section letter (A-G)">
                    </div>

                    <div class="question-header" style="margin-top: 30px;">Questions 35-40</div>
                    <div class="question-instructions">Complete the sentences below. Choose ONE WORD ONLY from the passage for each answer.</div>

                    <div class="question-item">
                        <div class="question-text"><strong>35.</strong> Some areas of both music and mathematics are suitable for someone who is a __________.</div>
                        <input type="text" class="answer-input" data-question="35">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>36.</strong> It is sometimes possible to understand advanced mathematics using no more than a limited knowledge of __________.</div>
                        <input type="text" class="answer-input" data-question="36">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>37.</strong> The writer intends to show that mathematics requires __________ thinking, as well as analytical skills.</div>
                        <input type="text" class="answer-input" data-question="37">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>38.</strong> Some books written by __________ have had to leave out the mathematics that is central to their theories.</div>
                        <input type="text" class="answer-input" data-question="38">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>39.</strong> The writer advises non-mathematical readers to perform __________ while reading the book.</div>
                        <input type="text" class="answer-input" data-question="39">
                    </div>

                    <div class="question-item">
                        <div class="question-text"><strong>40.</strong> A lawyer found that studying __________ helped even more than other areas of mathematics in the study of law.</div>
                        <input type="text" class="answer-input" data-question="40">
                    </div>
                </div>
            </div>
        </div>

        <div class="submit-section">
            <button class="submit-button" onclick="submitExam()">Submit Exam</button>
        </div>
    </div>

    <div class="results-modal" id="resultsModal">
        <div class="results-content">
            <div class="results-header">
                <h2>Exam Submitted Successfully!</h2>
                <p>Your answers have been recorded</p>
            </div>
            <div class="answer-sheet" id="answerSheet"></div>
            <div class="results-buttons">
                <button class="results-button copy-button" onclick="copyAnswers()">Copy Answers</button>
                <button class="results-button close-button" onclick="closeResults()">Close</button>
            </div>
        </div>
    </div>

    <div class="proctoring-overlay" id="proctoringOverlay">
        <div class="proctoring-content">
            <div class="proctoring-icon">âš ï¸</div>
            <div class="proctoring-title">Exam Interrupted!</div>
            <div class="proctoring-message">
                You have left the exam window. Please enter the reactivation code to continue.
            </div>
            <input type="text" id="reactivationInput" class="reactivation-input" placeholder="Enter reactivation code">
            <button class="reactivation-button" onclick="reactivateExam()">Reactivate Exam</button>
        </div>
    </div>

    <script>
        let studentName = '';
        let timerInterval;
        let timeRemaining = 3600; // 60 minutes in seconds
        let currentPassage = 1;
        let examActive = false;
        const CORRECT_PASSWORD = '3001';
        const REACTIVATION_CODE = '1103';

        // Password validation
        document.getElementById('passwordInput').addEventListener('input', function() {
            const password = this.value;
            const studentNameInput = document.getElementById('studentName');
            const startButton = document.getElementById('startButton');
            
            if (password === CORRECT_PASSWORD) {
                studentNameInput.disabled = false;
                studentNameInput.focus();
                this.style.borderColor = '#10b981';
            } else {
                studentNameInput.disabled = true;
                startButton.disabled = true;
                if (password.length > 0) {
                    this.style.borderColor = '#ef4444';
                }
            }
        });

        document.getElementById('studentName').addEventListener('input', function() {
            const startButton = document.getElementById('startButton');
            const password = document.getElementById('passwordInput').value;
            
            if (this.value.trim().length > 0 && password === CORRECT_PASSWORD) {
                startButton.disabled = false;
            } else {
                startButton.disabled = true;
            }
        });

        function startExam() {
            const password = document.getElementById('passwordInput').value;
            if (password !== CORRECT_PASSWORD) {
                alert('Incorrect password! Please enter the correct password to start the exam.');
                return;
            }

            studentName = document.getElementById('studentName').value.trim();
            if (!studentName) {
                alert('Please enter your name before starting the exam.');
                return;
            }

            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('examContainer').style.display = 'flex';
            document.getElementById('studentNameDisplay').textContent = studentName;
            
            examActive = true;
            startTimer();
            setupProctoring();
            setupHighlighting();
        }

        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    autoSubmitExam();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeRemaining <= 300) {
                document.getElementById('timer').style.color = '#ef4444';
            }
        }

        function switchPassage(passageNum) {
            currentPassage = passageNum;
            
            document.querySelectorAll('.passage-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.passage-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`passage${passageNum}`).classList.add('active');
            
            document.querySelectorAll('.question-group').forEach(group => {
                group.classList.remove('active');
            });
            document.getElementById(`questions${passageNum}`).classList.add('active');
            
            document.getElementById('passagePanel').scrollTop = 0;
            document.getElementById('questionsPanel').scrollTop = 0;
        }

        function setupProctoring() {
            document.addEventListener('visibilitychange', function() {
                if (examActive && document.hidden) {
                    document.getElementById('proctoringOverlay').style.display = 'flex';
                }
            });

            window.addEventListener('blur', function() {
                if (examActive) {
                    document.getElementById('proctoringOverlay').style.display = 'flex';
                }
            });
        }

        function reactivateExam() {
            const code = document.getElementById('reactivationInput').value;
            if (code === REACTIVATION_CODE) {
                document.getElementById('proctoringOverlay').style.display = 'none';
                document.getElementById('reactivationInput').value = '';
            } else {
                alert('Incorrect reactivation code! Please try again.');
            }
        }

        function setupHighlighting() {
            // Highlighting for passage panel
            const passagePanel = document.getElementById('passagePanel');
            passagePanel.addEventListener('mouseup', function() {
                handleTextSelection(this);
            });

            // Highlighting for questions panel
            const questionsPanel = document.getElementById('questionsPanel');
            questionsPanel.addEventListener('mouseup', function() {
                handleTextSelection(this);
            });
        }

        function handleTextSelection(container) {
            const selection = window.getSelection();
            if (selection.toString().length > 0) {
                const range = selection.getRangeAt(0);
                const selectedText = range.extractContents();
                const span = document.createElement('span');
                span.className = 'highlighted';
                span.appendChild(selectedText);
                range.insertNode(span);
                selection.removeAllRanges();
            }
        }

        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const input = this.querySelector('input[type="radio"]');
                if (input) {
                    input.checked = true;
                    const name = input.name;
                    document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                        radio.closest('.option').classList.remove('selected');
                    });
                    this.classList.add('selected');
                }
            });
        });

        function collectAnswers() {
            const answers = {};
            
            document.querySelectorAll('.answer-input').forEach(input => {
                const questionNum = input.getAttribute('data-question');
                if (questionNum) {
                    answers[questionNum] = input.value.trim() || '(not answered)';
                }
            });
            
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                const questionNum = radio.getAttribute('data-question');
                if (questionNum) {
                    answers[questionNum] = radio.value;
                }
            });
            
            return { studentName, answers };
        }

        function formatAnswerSheet(data) {
            let sheet = `EDUNEST - IELTS MOCK EXAM
Reading Test 3 - Answer Sheet
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Student Name: ${data.studentName}
Date: ${new Date().toLocaleDateString()}
Time: ${new Date().toLocaleTimeString()}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASSAGE 1 (Questions 1-13)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1.  ${data.answers['1'] || '(not answered)'}
2.  ${data.answers['2'] || '(not answered)'}
3.  ${data.answers['3'] || '(not answered)'}
4.  ${data.answers['4'] || '(not answered)'}
5.  ${data.answers['5'] || '(not answered)'}
6.  ${data.answers['6'] || '(not answered)'}
7.  ${data.answers['7'] || '(not answered)'}
8.  ${data.answers['8'] || '(not answered)'}
9.  ${data.answers['9'] || '(not answered)'}
10. ${data.answers['10'] || '(not answered)'}
11. ${data.answers['11'] || '(not answered)'}
12. ${data.answers['12'] || '(not answered)'}
13. ${data.answers['13'] || '(not answered)'}

PASSAGE 2 (Questions 14-26)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
14. ${data.answers['14'] || '(not answered)'}
15. ${data.answers['15'] || '(not answered)'}
16. ${data.answers['16'] || '(not answered)'}
17. ${data.answers['17'] || '(not answered)'}
18. ${data.answers['18'] || '(not answered)'}
19. ${data.answers['19'] || '(not answered)'}
20. ${data.answers['20'] || '(not answered)'}
21. ${data.answers['21'] || '(not answered)'}
22. ${data.answers['22'] || '(not answered)'}
23. ${data.answers['23'] || '(not answered)'}
24. ${data.answers['24'] || '(not answered)'}
25. ${data.answers['25'] || '(not answered)'}
26. ${data.answers['26'] || '(not answered)'}

PASSAGE 3 (Questions 27-40)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
27. ${data.answers['27'] || '(not answered)'}
28. ${data.answers['28'] || '(not answered)'}
29. ${data.answers['29'] || '(not answered)'}
30. ${data.answers['30'] || '(not answered)'}
31. ${data.answers['31'] || '(not answered)'}
32. ${data.answers['32'] || '(not answered)'}
33. ${data.answers['33'] || '(not answered)'}
34. ${data.answers['34'] || '(not answered)'}
35. ${data.answers['35'] || '(not answered)'}
36. ${data.answers['36'] || '(not answered)'}
37. ${data.answers['37'] || '(not answered)'}
38. ${data.answers['38'] || '(not answered)'}
39. ${data.answers['39'] || '(not answered)'}
40. ${data.answers['40'] || '(not answered)'}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
End of Answer Sheet
`;
            return sheet;
        }

        async function generatePDF(data) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(20);
            doc.setTextColor(220, 38, 38);
            doc.text('EDUNEST', 105, 20, { align: 'center' });
            
            doc.setFontSize(14);
            doc.text('IELTS MOCK EXAM - Reading Test 3', 105, 30, { align: 'center' });
            doc.text('Answer Sheet', 105, 38, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            doc.text(`Student Name: ${data.studentName}`, 20, 50);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 56);
            doc.text(`Time: ${new Date().toLocaleTimeString()}`, 20, 62);
            
            let y = 75;
            
            // Passage 1
            doc.setFontSize(12);
            doc.setTextColor(220, 38, 38);
            doc.text('PASSAGE 1 (Questions 1-13)', 20, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            for (let i = 1; i <= 13; i++) {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                doc.text(`${i}.  ${data.answers[i.toString()] || '(not answered)'}`, 25, y);
                y += 6;
            }
            
            y += 5;
            
            // Passage 2
            if (y > 250) {
                doc.addPage();
                y = 20;
            }
            
            doc.setFontSize(12);
            doc.setTextColor(220, 38, 38);
            doc.text('PASSAGE 2 (Questions 14-26)', 20, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            for (let i = 14; i <= 26; i++) {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                doc.text(`${i}.  ${data.answers[i.toString()] || '(not answered)'}`, 25, y);
                y += 6;
            }
            
            y += 5;
            
            // Passage 3
            if (y > 250) {
                doc.addPage();
                y = 20;
            }
            
            doc.setFontSize(12);
            doc.setTextColor(220, 38, 38);
            doc.text('PASSAGE 3 (Questions 27-40)', 20, y);
            y += 8;
            
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            for (let i = 27; i <= 40; i++) {
                if (y > 270) {
                    doc.addPage();
                    y = 20;
                }
                doc.text(`${i}.  ${data.answers[i.toString()] || '(not answered)'}`, 25, y);
                y += 6;
            }
            
            doc.save(`EDUNEST_Reading_Test3_${data.studentName.replace(/\s+/g, '_')}_${new Date().getTime()}.pdf`);
        }

        async function submitExam() {
            examActive = false;
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            const data = collectAnswers();
            
            if (!data.studentName) {
                return;
            }
            
            const answerSheet = formatAnswerSheet(data);
            
            document.getElementById('answerSheet').textContent = answerSheet;
            document.getElementById('resultsModal').style.display = 'block';
            
            await generatePDF(data);
            
            const telegramText = `ðŸŽ“ EDUNEST - IELTS MOCK EXAM
ðŸ“ Reading Test 3 Results

ðŸ‘¤ Name: ${data.studentName}
ðŸ“… Date: ${new Date().toLocaleDateString()}
â° Time: ${new Date().toLocaleTimeString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ANSWERS:

PASSAGE 1:
${Object.keys(data.answers).filter(k => parseInt(k) >= 1 && parseInt(k) <= 13).map(k => `${k}. ${data.answers[k]}`).join('\n')}

PASSAGE 2:
${Object.keys(data.answers).filter(k => parseInt(k) >= 14 && parseInt(k) <= 26).map(k => `${k}. ${data.answers[k]}`).join('\n')}

PASSAGE 3:
${Object.keys(data.answers).filter(k => parseInt(k) >= 27 && parseInt(k) <= 40).map(k => `${k}. ${data.answers[k]}`).join('\n')}`;

            try {
                await fetch('https://mdrx18.pythonanywhere.com/api/telegram/send/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: telegramText,
                        send_to_all_admins: true,
                    })
                });
            } catch (error) {
                console.error('Error sending to Telegram:', error);
            }
        }

        async function autoSubmitExam() {
            await submitExam();
        }

        function copyAnswers() {
            const answerSheet = document.getElementById('answerSheet').textContent;
            navigator.clipboard.writeText(answerSheet).then(() => {
                alert('Answers copied to clipboard!');
            });
        }

        function closeResults() {
            document.getElementById('resultsModal').style.display = 'none';
        }
    </script>
</body>
</html>